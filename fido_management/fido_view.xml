<?xml version="1.0"?>
<openerp>
    <data>
        <record id='view_partner_fido_field' model='ir.ui.view'>
            <field name='name'>FIDO Partner</field>
            <field name='model'>res.partner</field>
            <field name="inherit_id" ref="base.view_partner_form"/>
            <field name='arch' type='xml'>
              <field name="image" position="before">
                  <div style="background-color: red;text-align: center;font-weight:bold;color:white;">
                      <field name="empty" readonly="1" nolabel="1" attrs="{'invisible': [('uncovered_state', '!=', 'red')]}" class="oe_color_red" />
                  </div>
                  <div style="background-color: yellow;text-align: center;font-weight:bold;color:white;">
                      <field name="empty" readonly="1" nolabel="1" attrs="{'invisible': [('uncovered_state', '!=', 'yellow')]}" class="oe_color_red" />
                  </div>
                  <div style="background-color: green;text-align: center;font-weight:bold;color:white;">
                      <field name="empty" readonly="1" nolabel="1" attrs="{'invisible': [('uncovered_state', '!=', 'green')]}" class="oe_color_red" />
                  </div>
                  <div style="background-color: black;text-align: center;font-weight:bold;color:white;">
                      <field name="empty" readonly="1" nolabel="1" attrs="{'invisible': [('uncovered_state', '!=', 'black')]}" class="oe_color_red" />
                  </div>
              </field>
            
              <xpath expr="/form/sheet/notebook/page[3]" position="after">
                  <page string="FIDO">
                      <group colspan="4" col="4">
                          <separator string="Fido" colspan="4" />
                          <field name='fido_ko' />   
                          <newline />
                          <field name='fido_date' attrs="{'invisible':[('fido_ko', '=', True)]}"/>
                          <field name='fido_total' attrs="{'invisible':[('fido_ko', '=', True)]}" />
                          <field name='uncovered_amount' />
                          <field name='uncovered_state' />
                          
                          <separator string="Open payment" colspan="4" />
                          <field name="open_payment_ids" readonly="1" nolabel="1" colspan="4"> 
                              <tree string="Open Payment:" editable="bottom" color="red:out>0">
                                  <field name="invoice_id" />
                                  <field name="invoice_date" />
                                  <field name="deadline"/>
                                  <field name="type"/>
                                  <field name="out" sum="Uscite" string="Import OUT"  />
                                  <field name="in" sum="Entrate" string="Import IN"  />
                                  <!--<field name="invoice_ref" />-->
                                  <!--<field name="saldo_c" />
                                  <field name="saldo_s" />                                    
                                  <field name="scoperto_c" />-->                                   
                                  <!--<field name="property_account_position"/>-->
                              </tree>
                          </field>
                          <separator string="Open order" colspan="4" />
                          <field name="open_order_ids"  readonly="1" nolabel="1" colspan="4">
                              <tree string="Open Order" editable="bottom">
                                  <field name="name" />
                                  <field name="date_order" />
                                  <field name="date_deadline" />
                                  <field name="amount_total" sum="Uscite"/>
                                  <field name="open_amount_total" sum="Open"/>                                  
                                  <field name="state" />
                              </tree>
                          </field>
                          <separator string="Open DDT" colspan="4" />
                          <field name="open_picking_ids" readonly="1" nolabel="1" colspan="4">
                              <tree string="Open DDT:" editable="bottom">
                                  <field name="name" />
                                  <field name="date" />
                                  <field name="open_amount_total" sum="Open"/>                                  
                                  <field name="state" />
                                  <!--<field name="date_deadline" />
                                  <field name="amount_total" />-->
                              </tree>
                          </field>
                      </group>
                  </page>
              </xpath>
           </field>            
       </record>    

    <record model="ir.ui.view" id="view_res_partner_fido_filter">
            <field name="name">Partner fido filter</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_res_partner_filter"/>
            <field name="arch" type="xml">
               <field name="user_id" position="after">
                      <filter name='no_fido' string='FIDO removed' domain="[('fido_ko','=',True)]"/>
                      <filter name='yes_fido' string='FIDO present' domain="[('fido_ko','=',False),('fido_total','>=',0)]"/>
               </field>
               <filter string="Salesperson" position="after">
                   <filter string="FIDO assignement" name="group_type" context="{'group_by': 'fido_ko'}"/>
               </filter>
            </field>
    </record>

   <!--<record model="ir.ui.view" id="view_partner_tree_fido_field">
        <field name="name">Partner FIDO tree</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_tree"/>
        <field name="arch" type="xml">
               <field name="user_id" position="after">
                  <field name='fido_ko' />   
                  <field name='fido_date' attrs="{'invisible':[('fido_ko', '=', True)]}"/>
                  <field name='fido_total' attrs="{'invisible':[('fido_ko', '=', True)]}" />
               </field>
        </field>
    </record>-->
       
    </data>
</openerp>

